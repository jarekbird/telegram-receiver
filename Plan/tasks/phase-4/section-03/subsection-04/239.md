# PHASE4-021: Improve naming conventions

**Section**: 3. Refactoring
**Subsection**: 3.4
**Task ID**: PHASE4-021

## Description

Improve naming conventions throughout the telegram-receiver codebase to enhance code quality, readability, and maintainability. This task involves reviewing all source code files, identifying naming inconsistencies, and ensuring adherence to TypeScript/Node.js naming conventions.

**Note**: At the time of this task, the `src/` directory structure exists but contains minimal implementation code. This task serves a dual purpose:

1. **Establish naming conventions** for future code development
2. **Review and refactor existing code** (primarily in `tests/` directory) to ensure consistency

## Scope

This task covers:

- All source files in `src/` directory (controllers, services, models, routes, middleware, utils, types, config)
- All test files in `tests/` directory (which currently contain the majority of implementation code)
- Configuration files (TypeScript config, ESLint config, etc.)
- Documentation files that reference code elements
- Ensuring consistency with existing `docs/API_CONVENTIONS.md` naming guidelines

## TypeScript/Node.js Naming Conventions to Follow

### Variables and Functions

- Use **camelCase** for variables, functions, and methods
- Use descriptive names that clearly indicate purpose
- Avoid abbreviations unless they're widely understood
- Use verb-noun pattern for functions (e.g., `sendMessage`, `processUpdate`)
- Use noun pattern for variables (e.g., `messageId`, `userId`)

### Classes and Interfaces

- Use **PascalCase** for classes, interfaces, types, and enums
- Use descriptive names that indicate what they represent
- Interfaces should typically be nouns (e.g., `TelegramMessage`, `WebhookUpdate`)
- Classes should be nouns (e.g., `TelegramService`, `CursorRunnerClient`)

### Constants

- Use **UPPER_SNAKE_CASE** for module-level constants
- Use **camelCase** for constants within classes/functions if they're not exported
- Examples: `HTTP_STATUS`, `MAX_RETRY_ATTEMPTS`, `DEFAULT_TIMEOUT`

### File Names

- Use **camelCase** for TypeScript files (e.g., `telegramService.ts`, `webhookController.ts`)
- Use **kebab-case** for configuration files (e.g., `tsconfig.json`, `.eslintrc.json`)
- Test files should match source file names with `.test.ts` or `.spec.ts` suffix

### Private Members

- Prefix private class members with underscore if needed (though TypeScript `private` keyword is preferred)
- Use `_` prefix for intentionally unused parameters (e.g., `_unusedParam`)

### Boolean Variables/Functions

- Use `is`, `has`, `should`, `can`, `will` prefixes for boolean values
- Examples: `isValid`, `hasPermission`, `shouldRetry`, `canProcess`, `willExpire`

### Event Handlers/Callbacks

- Use `on` or `handle` prefix for event handlers
- Examples: `onMessage`, `handleWebhook`, `onError`

## Checklist

- [ ] Review existing `docs/API_CONVENTIONS.md` for naming conventions already documented
- [ ] Review all source files in `src/` directory for naming inconsistencies (note: directory may be mostly empty)
- [ ] Review all test files in `tests/` directory for naming consistency (use as reference for good practices)
- [ ] Identify variables that don't follow camelCase convention
- [ ] Identify functions that don't follow camelCase convention or verb-noun pattern
- [ ] Identify classes/interfaces that don't follow PascalCase convention
- [ ] Identify constants that don't follow UPPER_SNAKE_CASE convention
- [ ] Check for abbreviations that should be spelled out
- [ ] Check for unclear or ambiguous names
- [ ] Check for boolean variables missing `is`/`has`/`should` prefixes
- [ ] Check for event handlers missing `on`/`handle` prefixes
- [ ] Ensure consistency between naming conventions and `docs/API_CONVENTIONS.md`
- [ ] Rename all identified inconsistencies in existing code
- [ ] Update all references to renamed elements
- [ ] Verify no broken imports or references
- [ ] Add ESLint naming convention rules to `.eslintrc.json`:
  - `@typescript-eslint/naming-convention` rule for variables, functions, classes, interfaces, constants
  - Enforce camelCase for variables and functions
  - Enforce PascalCase for classes and interfaces
  - Enforce UPPER_SNAKE_CASE for constants
- [ ] Run linter to ensure no naming-related errors
- [ ] Run tests to ensure all functionality still works
- [ ] Document naming standards in `docs/naming-conventions.md` (ensure it complements `API_CONVENTIONS.md`)
- [ ] Update code style guide documentation

## Common Issues to Look For

1. **Inconsistent Case Usage**
   - Mixing camelCase and snake_case
   - Mixing PascalCase and camelCase for classes
   - Inconsistent constant naming

2. **Unclear Names**
   - Single-letter variables (except loop counters)
   - Abbreviations without context
   - Generic names like `data`, `item`, `obj`, `temp`

3. **Missing Prefixes**
   - Boolean variables without `is`/`has`/`should` prefixes
   - Event handlers without `on`/`handle` prefixes
   - Private members without proper visibility modifiers

4. **Inconsistent Patterns**
   - Functions that don't follow verb-noun pattern
   - Variables that don't clearly indicate their type or purpose
   - Classes that don't clearly indicate their responsibility

5. **File Naming Issues**
   - Inconsistent file naming conventions
   - Test files that don't match source file names

## Documentation Requirements

Create or update `docs/naming-conventions.md` with:

- Overview of naming conventions used in the project
- Examples of correct naming for each type (variables, functions, classes, constants)
- Examples of incorrect naming to avoid
- Guidelines for specific scenarios (event handlers, boolean values, etc.)
- References to TypeScript/Node.js style guides
- Cross-reference to `docs/API_CONVENTIONS.md` for API-specific naming patterns
- Note: This document should complement, not duplicate, the naming conventions in `API_CONVENTIONS.md`

## Notes

- This task is part of Phase 4: Code Quality Audit
- Section: 3. Refactoring
- Focus on identifying and fixing code quality issues
- Document all findings and improvements
- Ensure all changes maintain backward compatibility where possible
- Update imports and references when renaming exported elements
- Run full test suite after making changes to ensure nothing is broken
- Current codebase state: `src/` directory structure exists but contains minimal implementation code; `tests/` directory contains the majority of existing code with good naming practices already in place
- Reference existing test files (e.g., `tests/fixtures/apiResponses.ts`, `tests/helpers/testUtils.ts`, `tests/mocks/telegramApi.ts`) as examples of good naming conventions
- Ensure consistency with `docs/API_CONVENTIONS.md` which already documents some naming patterns for API-related code
- ESLint configuration (`.eslintrc.json`) currently lacks specific naming convention rules - this task should add them

- Task can be completed independently by a single agent

## Related Tasks

- Previous: PHASE4-020
- Next: PHASE4-022

## Definition of Done

This document defines the criteria for task completion. The review agent uses these definitions to evaluate whether a task has been completed successfully.

### 1. CODE/FILE WRITING TASKS

**Description**: Tasks that involve writing, creating, modifying, or implementing SOURCE CODE FILES that need to be committed to git.

**Definition of Done**: "A Pull Request was created OR code was pushed to origin with the task complete"

**Examples**:
- Creating new source code files
- Modifying existing source code files
- Implementing features, functions, classes, modules
- Writing tests, specs
- Refactoring code
- Fixing bugs in source code

### 2. SYSTEM/ENVIRONMENT OPERATION TASKS

**Description**: Tasks involving installing dependencies, running builds, installing packages, running migrations, executing install scripts, etc.

**Definition of Done**: "The required operation must complete successfully with no errors, and the expected artifacts must be created. If any part of the operation fails, the task is NOT complete."

**Important Notes**:
- Installing dependencies requires packages to actually be installed successfully
- Updating package.json is NOT enough
- If the output mentions environmental issues, errors, warnings, or failed operations, the task is NOT complete

**Examples**:
- Installing npm packages, pip packages, gem dependencies
- Running database migrations
- Building/compiling projects
- Setting up development environments
- Running install scripts

