# PHASE3-007: Create architecture diagram

**Section**: 1. Architecture Review
**Subsection**: 1.7
**Task ID**: PHASE3-007

## Description

Create a visual architecture diagram to complement the existing architecture documentation (`docs/architecture.md`). The diagram should visually represent the application's architecture, component relationships, data flow, and integration with external services. This will make the architecture more accessible and easier to understand at a glance.

## Checklist

- [ ] Review existing architecture documentation (`docs/architecture.md`) to understand all components
- [ ] Create visual architecture diagram showing:
  - [ ] Application layers (Routes, Controllers, Services, Models, Middleware, Jobs, Utils, Types)
  - [ ] Component relationships and dependencies (dependency injection patterns, service dependencies)
  - [ ] Data flow (Telegram → Application → Cursor Runner → Application → Telegram)
  - [ ] External services (Telegram Bot API, Cursor Runner API, ElevenLabs API, Redis)
  - [ ] Background job processing flow (BullMQ job queue and worker processing)
  - [ ] State management (Redis for callbacks and job queues)
  - [ ] Authentication flows (webhook secret validation, admin authentication)
  - [ ] Error handling flows (error propagation through layers)
- [ ] Use appropriate diagram format (recommend Mermaid `.md` format for version control, or PNG/SVG)
- [ ] Save diagram to `docs/architecture-diagram.md` (for Mermaid) or `docs/architecture-diagram.png`/`.svg` (for image formats)
- [ ] Update `docs/architecture.md` to reference and embed the diagram
- [ ] Ensure diagram is clear, readable, and follows best practices for architecture diagrams

## Notes

- This task is part of Phase 3: Holistic Review and Best Practices
- Section: 1. Architecture Review
- Focus on identifying issues and improvements
- Document findings and decisions

- Task can be completed independently by a single agent

## Related Tasks

- Previous: PHASE3-006
- Next: PHASE3-008

## Definition of Done

This document defines the criteria for task completion. The review agent uses these definitions to evaluate whether a task has been completed successfully.

### 1. CODE/FILE WRITING TASKS

**Description**: Tasks that involve writing, creating, modifying, or implementing SOURCE CODE FILES that need to be committed to git.

**Definition of Done**: "A Pull Request was created OR code was pushed to origin with the task complete"

**Examples**:
- Creating new source code files
- Modifying existing source code files
- Implementing features, functions, classes, modules
- Writing tests, specs
- Refactoring code
- Fixing bugs in source code

### 2. SYSTEM/ENVIRONMENT OPERATION TASKS

**Description**: Tasks involving installing dependencies, running builds, installing packages, running migrations, executing install scripts, etc.

**Definition of Done**: "The required operation must complete successfully with no errors, and the expected artifacts must be created. If any part of the operation fails, the task is NOT complete."

**Important Notes**:
- Installing dependencies requires packages to actually be installed successfully
- Updating package.json is NOT enough
- If the output mentions environmental issues, errors, warnings, or failed operations, the task is NOT complete

**Examples**:
- Installing npm packages, pip packages, gem dependencies
- Running database migrations
- Building/compiling projects
- Setting up development environments
- Running install scripts

