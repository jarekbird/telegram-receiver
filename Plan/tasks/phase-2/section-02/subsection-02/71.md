# PHASE2-008: Create Redis client configuration

**Section**: 2. Redis Integration
**Subsection**: 2.2
**Task ID**: PHASE2-008

## Description

Create Redis client configuration module that exports Redis connection settings. This configuration will be used by the Redis connection utility (PHASE2-009) and other services that need Redis connectivity.

**Rails Implementation Reference:**

- `config/initializers/sidekiq.rb` - Sidekiq Redis configuration uses `ENV.fetch('REDIS_URL', 'redis://localhost:6379/0')`
- `app/services/cursor_runner_callback_service.rb` - Direct Redis client initialization uses `ENV.fetch('REDIS_URL', 'redis://localhost:6379/0')`
- Default Redis URL: `redis://localhost:6379/0`
- In Docker: `REDIS_URL=redis://redis:6379/0` (shared Redis instance)

**Node.js Implementation:**

- This task creates a configuration module that exports Redis connection settings
- The actual Redis client creation will be done in PHASE2-009 (Redis connection utility)
- Configuration should support both `redis` and `ioredis` packages (both are available in package.json)
- Use TypeScript types for type safety

## Checklist

- [ ] Create `src/config/redis.ts` file
- [ ] Access `process.env` (global in Node.js) for environment variable access
- [ ] Define `REDIS_URL` constant using `process.env.REDIS_URL` with default fallback to `'redis://localhost:6379/0'`
- [ ] Export Redis connection configuration object with:
  - [ ] `url` property (the Redis connection URL)
  - [ ] Optional connection options object (for future extensibility)
- [ ] Add TypeScript type definitions for the configuration object
- [ ] Export configuration as named export (e.g., `redisConfig`)
- [ ] Add JSDoc comments documenting the configuration structure
- [ ] Ensure configuration matches Rails pattern (environment variable with default)

## Notes

- This task is part of Phase 2: File-by-File Conversion
- Section: 2. Redis Integration
- **Rails Files to Reference:**
  - `jarek-va/config/initializers/sidekiq.rb` - Sidekiq Redis configuration pattern
  - `jarek-va/app/services/cursor_runner_callback_service.rb` - Direct Redis client initialization pattern
- This task creates configuration only - actual Redis client creation is handled in PHASE2-009
- The configuration should be environment-aware (supports Docker and local development)
- Default URL matches Rails default: `redis://localhost:6379/0`
- Task can be completed independently by a single agent

## Related Tasks

- Previous: PHASE2-007
- Next: PHASE2-009

## Definition of Done

This document defines the criteria for task completion. The review agent uses these definitions to evaluate whether a task has been completed successfully.

### 1. CODE/FILE WRITING TASKS

**Description**: Tasks that involve writing, creating, modifying, or implementing SOURCE CODE FILES that need to be committed to git.

**Definition of Done**: "A Pull Request was created OR code was pushed to origin with the task complete"

**Examples**:
- Creating new source code files
- Modifying existing source code files
- Implementing features, functions, classes, modules
- Writing tests, specs
- Refactoring code
- Fixing bugs in source code

### 2. SYSTEM/ENVIRONMENT OPERATION TASKS

**Description**: Tasks involving installing dependencies, running builds, installing packages, running migrations, executing install scripts, etc.

**Definition of Done**: "The required operation must complete successfully with no errors, and the expected artifacts must be created. If any part of the operation fails, the task is NOT complete."

**Important Notes**:
- Installing dependencies requires packages to actually be installed successfully
- Updating package.json is NOT enough
- If the output mentions environmental issues, errors, warnings, or failed operations, the task is NOT complete

**Examples**:
- Installing npm packages, pip packages, gem dependencies
- Running database migrations
- Building/compiling projects
- Setting up development environments
- Running install scripts

