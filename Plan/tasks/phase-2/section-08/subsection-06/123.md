# PHASE2-060: Implement delete_webhook endpoint

**Section**: 8. TelegramController Conversion
**Subsection**: 8.6
**Task ID**: PHASE2-060

## Description

Convert the `delete_webhook` endpoint from Rails to TypeScript/Node.js. This endpoint allows administrators to delete the Telegram webhook configuration.

**Rails Implementation Reference:**

- Controller: `jarek-va/app/controllers/telegram_controller.rb` (lines 90-106)
- Service: `jarek-va/app/services/telegram_service.rb` (lines 53-63)
- Route: `DELETE /telegram/webhook` (defined in `jarek-va/config/routes.rb` line 35)

**Rails Implementation Details:**

- The `delete_webhook` controller method requires admin authentication via `authenticate_admin`
- Returns `401 Unauthorized` if admin authentication fails
- Calls `TelegramService.delete_webhook` which uses the Telegram Bot API to delete the webhook
- On success, returns JSON: `{ ok: true, message: 'Webhook deleted successfully' }` with HTTP status 200
- On error, catches `StandardError`, logs the error, and returns JSON: `{ ok: false, error: e.message }` with HTTP status 500
- The service method returns early if `telegram_bot_token` is blank

## Checklist

- [ ] Implement `deleteWebhook` handler method in TelegramController
- [ ] Add route: `DELETE /telegram/webhook` mapping to the handler
- [ ] Require admin authentication (return 401 if authentication fails)
- [ ] Call `TelegramService.deleteWebhook()` method
- [ ] Return success response: JSON `{ ok: true, message: 'Webhook deleted successfully' }` with status 200
- [ ] Add error handling: catch errors, log them, and return JSON `{ ok: false, error: error.message }` with status 500
- [ ] Ensure TelegramService.deleteWebhook handles empty bot token gracefully (returns early if token is blank)

## Notes

- This task is part of Phase 2: File-by-File Conversion
- Section: 8. TelegramController Conversion
- Reference the Rails implementation for behavior

- Task can be completed independently by a single agent

## Related Tasks

- Previous: PHASE2-059
- Next: PHASE2-061

## Definition of Done

This document defines the criteria for task completion. The review agent uses these definitions to evaluate whether a task has been completed successfully.

### 1. CODE/FILE WRITING TASKS

**Description**: Tasks that involve writing, creating, modifying, or implementing SOURCE CODE FILES that need to be committed to git.

**Definition of Done**: "A Pull Request was created OR code was pushed to origin with the task complete"

**Examples**:
- Creating new source code files
- Modifying existing source code files
- Implementing features, functions, classes, modules
- Writing tests, specs
- Refactoring code
- Fixing bugs in source code

### 2. SYSTEM/ENVIRONMENT OPERATION TASKS

**Description**: Tasks involving installing dependencies, running builds, installing packages, running migrations, executing install scripts, etc.

**Definition of Done**: "The required operation must complete successfully with no errors, and the expected artifacts must be created. If any part of the operation fails, the task is NOT complete."

**Important Notes**:
- Installing dependencies requires packages to actually be installed successfully
- Updating package.json is NOT enough
- If the output mentions environmental issues, errors, warnings, or failed operations, the task is NOT complete

**Examples**:
- Installing npm packages, pip packages, gem dependencies
- Running database migrations
- Building/compiling projects
- Setting up development environments
- Running install scripts

