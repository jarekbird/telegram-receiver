# PHASE1-032: Create logger utility wrapper

**Section**: 8. Logging Infrastructure
**Subsection**: 8.3
**Task ID**: PHASE1-032

## Description

Create logger utility wrapper that provides a consistent logging interface matching Rails.logger patterns from jarek-va. The wrapper should import the configured logger from `src/config/logger.ts` (created in PHASE1-031) and expose a simple interface with `info()`, `error()`, `warn()`, and `debug()` methods that match Rails.logger usage patterns.

**Rails Logging Patterns to Replicate:**

- The jarek-va Rails application uses `Rails.logger.info()`, `Rails.logger.error()`, `Rails.logger.warn()`, and `Rails.logger.debug()` throughout controllers, services, jobs, and tools
- Error logging includes full stack traces (see `jarek-va/app/controllers/application_controller.rb` lines 10-11 and `jarek-va/app/services/telegram_service.rb` lines 33-34)
- Logging methods accept string messages and can include additional context/metadata
- The logger is used extensively for debugging, error tracking, and operational logging

**Purpose of Wrapper:**

- Provides a consistent interface similar to `Rails.logger` for easy migration from Rails code
- Centralizes logger access point (similar to how Rails.logger is accessed globally)
- Ensures all application code uses the same configured logger instance
- Simplifies imports throughout the application (import from `src/utils/logger.ts` instead of config)

## Checklist

- [ ] Create `src/utils/logger.ts` file
- [ ] Import the configured logger from `src/config/logger.ts` (created in PHASE1-031)
- [ ] Create wrapper object with methods matching Rails.logger interface:
  - [ ] `logger.info(message: string, ...args: any[])` - Log informational messages
  - [ ] `logger.error(message: string, ...args: any[])` - Log error messages (should include stack traces for Error objects)
  - [ ] `logger.warn(message: string, ...args: any[])` - Log warning messages
  - [ ] `logger.debug(message: string, ...args: any[])` - Log debug messages
- [ ] Ensure error logging handles Error objects and includes stack traces (matching Rails error logging pattern where errors are logged in two separate calls: first the error message with class name `Rails.logger.error("#{exception.class}: #{exception.message}")`, then the full backtrace `Rails.logger.error(exception.backtrace.join("\n"))`. The wrapper should detect Error objects and automatically log both the error message and stack trace)
- [ ] Export the logger wrapper as default export
- [ ] Ensure TypeScript types are properly defined for all methods
- [ ] Ensure consistent logging interface that matches Rails.logger usage patterns
- [ ] Verify wrapper properly forwards all arguments to underlying logger instance

## Notes

- This task is part of Phase 1: Basic Node.js API Infrastructure
- Section: 8. Logging Infrastructure
- Task can be completed independently by a single agent
- **Prerequisite**: PHASE1-031 must be completed first to create the logger configuration module
- **Rails Reference**: The jarek-va Rails application uses `Rails.logger` extensively:
  - `jarek-va/app/controllers/application_controller.rb` (lines 10-11) - Error logging with full backtraces
  - `jarek-va/app/services/telegram_service.rb` (lines 33-34, 47-48, etc.) - Error logging with messages and backtraces
  - `jarek-va/app/jobs/telegram_message_job.rb` (lines 33-34) - Error logging pattern
  - Various service files use `Rails.logger.info()`, `Rails.logger.error()`, `Rails.logger.warn()`, `Rails.logger.debug()`
- **Error Handling**: When logging errors, the wrapper should detect Error objects and automatically include stack traces. The Rails pattern logs errors in two separate calls: first `Rails.logger.error("#{exception.class}: #{exception.message}")` then `Rails.logger.error(exception.backtrace.join("\n"))`. The wrapper should replicate this by detecting Error objects in the arguments and automatically logging both the error message (with class name) and the full stack trace as separate log entries. This ensures error logging matches Rails patterns exactly.
- **Usage Pattern**: The wrapper should allow usage like:

  ```typescript
  import logger from '@/utils/logger';

  logger.info('Processing message');
  logger.error('Error occurred', error);
  logger.warn('Warning message');
  logger.debug('Debug information');
  ```

- **Type Safety**: Ensure proper TypeScript types are defined for all logger methods to provide type safety and IntelliSense support.

## Related Tasks

- Previous: PHASE1-031
- Next: PHASE1-033

## Definition of Done

This document defines the criteria for task completion. The review agent uses these definitions to evaluate whether a task has been completed successfully.

### 1. CODE/FILE WRITING TASKS

**Description**: Tasks that involve writing, creating, modifying, or implementing SOURCE CODE FILES that need to be committed to git.

**Definition of Done**: "A Pull Request was created OR code was pushed to origin with the task complete"

**Examples**:
- Creating new source code files
- Modifying existing source code files
- Implementing features, functions, classes, modules
- Writing tests, specs
- Refactoring code
- Fixing bugs in source code

### 2. SYSTEM/ENVIRONMENT OPERATION TASKS

**Description**: Tasks involving installing dependencies, running builds, installing packages, running migrations, executing install scripts, etc.

**Definition of Done**: "The required operation must complete successfully with no errors, and the expected artifacts must be created. If any part of the operation fails, the task is NOT complete."

**Important Notes**:
- Installing dependencies requires packages to actually be installed successfully
- Updating package.json is NOT enough
- If the output mentions environmental issues, errors, warnings, or failed operations, the task is NOT complete

**Examples**:
- Installing npm packages, pip packages, gem dependencies
- Running database migrations
- Building/compiling projects
- Setting up development environments
- Running install scripts

